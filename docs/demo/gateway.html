<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



<!-- Favicon icon-->
<link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon/favicon.ico">

<!-- Libs CSS -->

<link rel="stylesheet" href="../assets/libs/prismjs/themes/prism.css">
<link rel="stylesheet" href="../assets/libs/prismjs/plugins/line-numbers/prism-line-numbers.css">
<link rel="stylesheet" href="../assets/libs/prismjs/plugins/toolbar/prism-toolbar.css">
<link rel="stylesheet" href="../assets/libs/bootstrap-icons/font/bootstrap-icons.css">
<link rel="stylesheet" href="../assets/libs/dropzone/dist/dropzone.css" >
<link href="../assets/libs/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.css">






<!-- Theme CSS -->
<link rel="stylesheet" href="../assets/css/theme.min.css">
  <title>TAGA ARCHITECTURE DEMO - API GATEWAY</title>


</head>

<body class="bg-white">
  <!-- Main wrapper -->

  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom position-fixed w-100  " style="z-index: 2;">
   <div class="container-xxl ">
     <a class="navbar-brand" href="../index.html"><h2 style='color:blue;font-weight:bolder'>TAGA ARCHITECTURE DEMO</h2></a>
     <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
       <span class="navbar-toggler-icon"></span>
     </button>


     <div class="collapse navbar-collapse" id="navbarSupportedContent">
       <!--ul class="navbar-nav me-auto mb-2 mb-lg-0">
         <li class="nav-item">
           <a class="nav-link active" href="../index.html">Home</a>
         </li>
         <li class="nav-item">
           <a class="nav-link" href="../components/accordions.html">Components</a>
         </li>

         <li class="nav-item">
           <a class="nav-link" href="../docs/index.html">Docs</a>
         </li>
       </ul-->
       <div class="ms-auto d-flex">
         <a href="https://www.consultindochina.com/" class="btn btn-primary2 d-flex align-items-center"><img src="https://www.consultindochina.com/images/product/logo-product-page.png" style="height:40px" alt=""/></a>

       </div>

     </div>
   </div>
 </nav>
    <!-- Left sidebar -->

    <div class="pt-9">
        <div class="container-xxl">
            <div class="row">
            <div class="col-lg-2 col-12 position-sticky">
                <div class="demo-sidebar">
  <nav class="navbar navbar-expand-lg navbar-light">
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav flex-column" id="sidebarnav">
              <li class="nav-item"><a href="index.html" class="nav-link">Introduction</a></li>
              <li class="nav-item"><a href="cognito.html" class="nav-link">1. Authorization with AWS Cognito User Pools</a></li>

              <li class="nav-item"><a href="gateway.html" class="nav-link">2. API Gateway </a>
              </li>
              
			  <li class="nav-item"><a href="es.html" class="nav-link">3. DynamoDB & Elastic Search</a></li>
			  
			  

              
          </ul>

        </div>

    </nav>
  </div>
            </div>
            <div class="col-lg-8 col-12 p-8">
                <div class="row">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                      <div class="mb-10" id="intro">
                        <h1 class="mb-2">API Gateway</h1>
                        <p class="mb-0 lead text-dark">API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale. APIs act as the "front door" for applications to access data, business logic, or functionality from your backend services</p>

                      </div>
                    </div>
                  </div>
                  <!-- Row -->
				  
				  <div class="col-xl-12 col-md-12 col-12 mb-12">
              <!-- card -->
              <div class="card">
                <!-- card body -->
                <div class="card-body">
                  <div class="d-flex justify-content-between mb-5
                      align-items-center">
                    
                    <div>
                     
                    </div>
                  </div>
                  <div class="mb-4">
                    <!-- text -->
                    
                    <img src="https://d1.awsstatic.com/serverless/New-API-GW-Diagram.c9fc9835d2a9aa00ef90d0ddc4c6402a2536de0d.png" class="rounded-3 w-100" alt="">
                  </div>
                  <!-- icons -->
                  <!--div class="mb-4">
                    <span class="me-1 me-md-4"><i data-feather="heart"
                          class="icon-xxs text-muted me-2"></i><span>20 Like</span></span>
                    <span class="me-1 me-md-4"><i
                          data-feather="message-square" class="icon-xxs
                          text-muted me-2"></i><span>12 Comment</span></span>
                    <span><i data-feather="share-2" class="icon-xxs
                          text-muted me-2"></i><span>Share</span></span>
                  </div-->
                  
                  <!-- row -->
                  
                </div>
              </div>
            </div>
			
				  
                  <div class="row">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                      <div class="mb-4" >
                        <h3 class="fw-medium"><a href="#quickstart" name="quickstart" id="quickstart" class="heading-permalink" aria-hidden="true" title="">Â¶</a>Quick start</h3>
                        <div class="mt-6" id="css">
                          <h4 class="mb-2">Create Product</h4>
                        </div>
                        <!-- Card -->
                        <div class="card p-4">
							<div class="d-grid">
								<textarea style='width:100%; height:100px' id="txt_create" name="txt_create" >
{
	"name": "1.11092021 test newproduct",
	"label1": "1 label 1",
	"label2": "2 label 2",
	"label3": "3 label 3"
}
								</textarea>
								<br/>
								<br/>
								<button id="create_product" name="create_product" type="submit" class="btn btn-primary">
									Create Product
								</button>
								<i id="txt_create_result" name="txt_create_result"></i> 
							</div>
                        </div>
						<div class="mt-6" id="css">
                          <h4 class="mb-2">Update Product (Enqueue)</h4>
                        </div>
                        <!-- Card -->
                        <div class="card p-4">
							<div class="d-grid">
								<textarea style='width:100%; height:100px' id="txt_update" name="txt_update"  >
{
  "product_id": "aef19084-8b88-4910-8d8c-c145fe808117",
  "product_name": "newproduct3",
  "price": 7777.77,
  "label1": "label 1",
  "label2": "label 2",
  "label3": "label 3"
}								
								</textarea>
								<br/>
								<br/>
								<button id="update_product" name="update_product" type="submit" class="btn btn-primary">
									Update Product
								</button>
								  <i id="txt_update_result" name="txt_update_result"></i> 
							</div>
                        </div>
						<div class="mt-6" id="css">
                          <h4 class="mb-2">Approve Product</h4>
                        </div>
                        <!-- Card -->
                        <div class="card p-4">
							<div class="d-grid">
								<textarea style='width:100%; height:100px' id="txt_approve" name="txt_approve">
{
  "product_id": "aef19084-8b88-4910-8d8c-c145fe808117",
  "product_name": "newproduct3"
}									
								</textarea>
								<br/>
								<br/>
								<button id="approve_product" name="approve_product" type="submit" class="btn btn-primary">
									Approve Product
								</button>
								 <i id="txt_approve_result" name="txt_approve_result"></i> 
							</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                      <div class="mb-5" id="js">
                        <div class="mt-3 mb-3">
                          <h4 class="mb-2" id="token_text" name="token_text" style="color:red">Token NOT Available </h4>
                        </div>
                        <!-- Card -->
                        <div class="card p-4 mt-4 mb-4">
                          <div class="copy-content copy-content-height">
                            <div class="code-toolbar">
                              <pre class="line-numbers language-markup"><code class="language-markup" id="local_token" name="local_token" ></code></pre>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
				  





                  
            </div>
        </div>
        </div>
    </div>

    <!-- Wrapper  -->

  </div>

  <!-- Scripts -->
  <!-- Libs JS -->
<script src="../assets/libs/jquery/dist/jquery.min.js"></script>
<script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/libs/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<script src="../assets/libs/feather-icons/dist/feather.min.js"></script>
<script src="../assets/libs/prismjs/components/prism-core.min.js"></script>
<script src="../assets/libs/prismjs/components/prism-markup.min.js"></script>
<script src="../assets/libs/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="../assets/libs/apexcharts/dist/apexcharts.min.js"></script>
<script src="../assets/libs/dropzone/dist/min/dropzone.min.js"></script>


<!-- clipboard -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.12/clipboard.min.js"></script>



<!-- Theme JS -->
<script src="../assets/js/theme.min.js"></script>
	<script>
	window.onfocus = function () { 
	  // do what you need
			var $token = localStorage.getItem("token");
			if ($token){
				$("#token_text").html("TOKEN is READY");
				$("#token_text").css("color","blue");
				$("#local_token").html($token);
			}
	}; 
	
	$(document).ready(function() {
		//$("#txt_create").val("");
		$("#create_product").click(function(){
			//
			var content = $("#txt_create").val();
			console.log(content);
			$("#txt_create_result").html("");
			$.ajax({
				url: "https://45jerqn2u3.execute-api.us-east-1.amazonaws.com/dev/add",
				type: "post",
				contentType: "application/json; charset=utf-8",
				data: content ,
				success: function (response) {

				   // You will get response from your PHP page (what you echo or print)
				   // recheck es
				   $("#txt_create_result").html("Product created, please check ES result");
				},
				error: function(jqXHR, textStatus, errorThrown) {
				   console.log(textStatus, errorThrown);
				}
			});
		}); 
		
		const random = (min, max) => Math.floor(Math.random() * (max - min)) + min;
		
		$("#update_product").click(function(){
			//
			var content = $("#txt_update").val();
			console.log(content);
			$("#txt_update_result").html("");
			$.ajax({
				url: "https://xj9bwafusb.execute-api.us-east-1.amazonaws.com/demo1/v1/enqueue?MessageGroupId=group1&MessageDeduplicationId=" + random(1, 100),
				type: "post",
				contentType: "application/json; charset=utf-8",
				data: content ,
				success: function (response) {

				   // You will get response from your PHP page (what you echo or print)
				   // recheck es
				   $("#txt_update_result").html("Product updated, please check Your email and ES for result");
				},
				error: function(jqXHR, textStatus, errorThrown) {
				   console.log(textStatus, errorThrown);
				}
			});
		}); 
		
		$("#approve_product").click(function(){
			//
			var content = $("#txt_approve").val();
			console.log(content);
			$("#txt_approve_result").html("");
			$.ajax({
				url: "https://gycqlusd78.execute-api.us-east-1.amazonaws.com/tagademo2",
				type: "post",
				contentType: "application/json; charset=utf-8",
				data: content ,
				success: function (response) {
					console.log(response);
				   // You will get response from your PHP page (what you echo or print)
				   // recheck es
				   $("#txt_approve_result").html("Product approved, please check ES for result");
				},
				error: function(jqXHR, textStatus, errorThrown) {
				   console.log(textStatus, errorThrown);
				}
			});
		}); 
		
		
		
	});
		
	</script>

</body>

</html>